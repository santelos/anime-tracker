<html>
    <meta charset="UTF-8">
    <script>
        function showAddUserForm() {
            var form = document.getElementById("addForm");
            var showButton = document.getElementById("showFormButton");
            form.style.display = "block";
            showButton.style.display = "none";
        }
        function deleteUser(id) {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onload = function() {
                location.reload();
            }
            xmlHttp.open("POST", "/delete-user", true); // true for asynchronous\
            xmlHttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xmlHttp.send('id=' + id);

            return false;
        }
    </script>
    <head>
        <title>Смотрящие</title>
    </head>
    <style>
        table, th, td {
          border: 1px solid black;
        }
      </style>
    <body>
    <table>
        <tr>
            <th>ИД</th>
            <th>Псевдоним</th>
            <th></th>
        </tr>
        {% for item in users %}
        <tr>
            <td>{{item.id}}</td>
            <td>{{item.name}}</td>
            <td>
                <button onclick="deleteUser({{item.id}})">X</button>
            </td>
        </tr>
        {% endfor %}
    </table>
    <div>
        <button onclick="showAddUserForm()" id="showFormButton">Добавить пользователя</button>
        <div id="addForm" style="display:none">
            <form action="/insert-user" method="POST">
                <p><b>Псевдоним:</b><br>
                    <input type="text" name="name" size="40">
                </p>
                <p><input type="submit" value="Сохранить пользователя"></p>
            </form>
        </div>
    </div>
    </body>
</html>